(this.webpackJsonpgpc=this.webpackJsonpgpc||[]).push([[18,36],{255:function(e,t,n){"use strict";var i=n(2);t.a=function(e){return Object(i.jsx)("div",{className:"page-commands",children:e.children})}},256:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"f",(function(){return u})),n.d(t,"e",(function(){return j})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return b})),n.d(t,"g",(function(){return f}));var i=n(5),r=n(201),c=n(334),a=n(200),o=n(88),s=n(2),l=Object(i.a)((function(e){return Object(r.a)({badge:{right:-3,top:13,border:"2px solid ".concat(e.palette.background.paper),padding:"0 4px",backgroundColor:"gray",color:"white"}})}))(c.a),d=Object(i.a)((function(e){return Object(r.a)({badge:{right:-3,top:13,border:"2px solid ".concat(e.palette.background.paper),padding:"0 4px",backgroundColor:"green",color:"white"}})}))(c.a),u=function(e){var t=Object(a.a)((function(e){return Object(r.a)({root:{flexGrow:1},paper:{padding:e.spacing(2),color:e.palette.text.secondary,minHeight:400,position:"relative"}})}))();return Object(s.jsx)("div",{className:t.root,children:Object(s.jsx)(o.a,{className:t.paper,children:e.children})})},j=function(e){var t=e.height,n=e.maxWidth,i=e.children,c=Object(a.a)((function(e){return Object(r.a)({root:{fontSize:16,padding:"0 2px",borderBottom:"2px dotted #e0e0e0",height:null!==t&&void 0!==t?t:"initial",maxWidth:null!==n&&void 0!==n?n:300,minHeight:20}})}))();return Object(s.jsx)("div",{className:c.root,children:i})},h=function(e){var t=e.align,n=e.wrap,i=e.className,c=e.children,o=Object(a.a)((function(e){return Object(r.a)({root:{textAlign:t,whiteSpace:n?"initial":"nowrap","& > ul":{margin:0,paddingInlineStart:0},"& ul ul":{padding:"20px"},"& li":{listStyle:"none",display:"inline-block",verticalAlign:"top",margin:"left"==t?"0 10px 0 0":"center"==t?"0 5px 0 5px":"0 0 0 10px"}}})}))();return Object(s.jsx)("div",{className:"".concat(o.root," ").concat(null!==i&&void 0!==i?i:""),children:Object(s.jsx)("ul",{children:c})})},b=function(e){var t=e.align,n=e.width,i=e.children,c=Object(a.a)((function(e){return Object(r.a)({root:{textAlign:null!==t&&void 0!==t?t:"left",width:n?"".concat(n,"px"):"initial"}})}))();return Object(s.jsx)("li",{className:c.root,children:i})},f=Object(a.a)((function(e){return Object(r.a)({root:{"&, & *":{cursor:"pointer !important",color:"black !important"},"&:hover *":{color:"blue !important"}}})}))},259:function(e,t,n){"use strict";n.d(t,"f",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"g",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return j})),n.d(t,"a",(function(){return h})),n.d(t,"h",(function(){return b}));var i=n(65),r=n(64),c=n(7),a=function e(){Object(c.a)(this,e),this.id=0,this.unit=""},o=function e(){Object(c.a)(this,e),this.id=0,this.category=""},s=function e(){Object(c.a)(this,e),this.id=0,this.warehouse="",this.accountNo="",this.account=void 0},l=function e(){Object(c.a)(this,e),this.id=0,this.stockName="",this.description="",this.unitId=0,this.categoryId=0,this.unit=void 0,this.category=void 0},d=function e(){Object(c.a)(this,e),this.id=0,this.docDate=new Date,this.description="",this.warehouseId=0,this.remarks="",this.isConfirmed=!1,this.dateConfirmed=void 0,this.conrirmedByProfileId=void 0,this.confirmedBy=void 0,this.warehouse=void 0,this.itemCount=0},u=function(e){Object(i.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(c.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).poNo="",e.drNo="",e.amount=0,e.supplier="",e}return n}(d),j=function(e){Object(i.a)(n,e);var t=Object(r.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return n}(d),h=function(e){Object(i.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(c.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).orNo="",e.accountNo="",e.account=void 0,e.amount=0,e}return n}(d),b=function(e){Object(i.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(c.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).orNo="",e.toWarehouseId=0,e.toWarehouse=void 0,e.amount=0,e}return n}(d)},260:function(e,t,n){"use strict";n.r(t);var i=n(235),r=(n(89),n(57)),c=n(2),a=function(){var e=Object(r.b)().go;return Object(c.jsxs)("div",{className:"landing-page-menu",children:[Object(c.jsx)(i.a,{onClick:function(){return e("delivery")},children:"Delivery"}),Object(c.jsx)(i.a,{onClick:function(){return e("pricelist")},children:"Price List"}),Object(c.jsx)(i.a,{onClick:function(){return e("account-order")},children:"Account Order"}),Object(c.jsx)(i.a,{onClick:function(){return e("warehouse-order")},children:"Warehouse Order"}),"\xa0|\xa0",Object(c.jsx)(i.a,{onClick:function(){return e("inventory-report")},children:"Inventory"}),"\xa0|\xa0",Object(c.jsx)(i.a,{onClick:function(){return e("units")},children:"Units"}),Object(c.jsx)(i.a,{onClick:function(){return e("categories")},children:"Categories"}),Object(c.jsx)(i.a,{onClick:function(){return e("warehouse")},children:"Warehouse"}),Object(c.jsx)(i.a,{onClick:function(){return e("stocks")},children:"Stocks"})]})};t.default=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h3",{children:"Inventory"}),Object(c.jsx)("p",{children:"Please select your task"}),Object(c.jsx)(a,{}),Object(c.jsx)("hr",{}),Object(c.jsx)("br",{})]})}},268:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n(10),r=n(14),c=n.n(r),a=n(25),o=n(19),s=n(358),l=n(372),d=n(0),u=n(57),j=n(62),h=n(2),b=function(e){var t=e.value,n=e.onChange,r=e.refresh,b=e.inputLabel,f=Object(u.c)(),p=Object(d.useState)(null),O=Object(o.a)(p,2),v=O[0],x=O[1],m=Object(d.useState)(null),g=Object(o.a)(m,2),w=g[0],k=g[1],y=Object(d.useState)(""),C=Object(o.a)(y,2),N=C[0],S=C[1],I=function(){var e=Object(a.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("".concat("http://localhost:44084/api","/inventory/warehouse/list"));case 2:(t=e.sent).success&&x(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.useEffect)((function(){var e;I(),k(null!==t&&void 0!==t?t:null),S(null!==(e=null===t||void 0===t?void 0:t.warehouse)&&void 0!==e?e:"")}),[r,t]),Object(h.jsx)(h.Fragment,{children:v?Object(h.jsx)(s.a,{value:w,onChange:function(e,t){k(t),n&&n(null!==t&&void 0!==t?t:void 0)},inputValue:N,onInputChange:function(e,t){return S(null!==t&&void 0!==t?t:"")},options:v,getOptionLabel:function(e){return e.warehouse},renderInput:function(e){return Object(h.jsx)(l.a,Object(i.a)(Object(i.a)({},e),{},{label:b,required:!0}))}}):Object(h.jsx)(j.a,{})})};b.defaultProps={inputLabel:"Select Warehouse"}},271:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(10),r=n(19),c=n(372),a=n(0),o=n(28),s=n(2),l=function(e){var t,n=Object(a.useState)(Object(o.e)(Number(null!==(t=e.value)&&void 0!==t?t:"0"))),l=Object(r.a)(n,2),d=l[0],u=l[1];return Object(s.jsx)(c.a,Object(i.a)(Object(i.a)({},e.tfProps),{},{value:d,onChange:function(t){if(!isNaN(Number(t.target.value))){var n=parseFloat(t.target.value);(e.zeroIsAllowed?n>=0:n>0)&&u(t.target.value)}},onBlur:function(t){var n=t.target.value.replace(",",""),i=parseFloat(n);u(Object(o.e)(i)),e.onFinalChange(i)}}))}},273:function(e,t,n){"use strict";t.a=n.p+"static/media/confirmed.9ef1307f.png"},292:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var i=n(14),r=n.n(i),c=n(25),a=n(19),o=n(10),s=n(0),l=n(57),d=n(62),u=n(257),j=n(235),h=n(230),b=n(35),f=n(193),p=n(200),O=n(201),v=n(238),x=n(239),m=n(229),g=n(56),w=n(277),k=n.n(w),y=n(2),C=Object(p.a)((function(e){return Object(O.a)({appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}})})),N=Object(s.forwardRef)((function(e,t){return Object(y.jsx)(f.a,Object(o.a)({direction:"up",ref:t},e))})),S=function(e){var t=e.selectedIds,n=e.onChange,i=Object(l.c)(),o=Object(s.useState)(null),j=Object(a.a)(o,2),h=j[0],b=j[1],f=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.get("".concat("http://localhost:44084/api","/inventory/stock/list"));case 2:(t=e.sent).success&&b(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){f()}),[]);var p=Object(s.useState)([]),O=Object(a.a)(p,2),v=O[0],x=O[1];return Object(y.jsx)(y.Fragment,{children:h?Object(y.jsx)(u.a,{rows:h.filter((function(e){return!t.find((function(t){return t==e.id}))})),columns:[{field:"id",headerName:"Id",width:90},{field:"stockName",headerName:"Stock Name",width:300},{field:"description",headerName:"Description",width:350},{field:"unitId",headerName:"Unit",width:150,valueGetter:function(e){var t;return null===(t=e.getValue(e.id,"unit"))||void 0===t?void 0:t.unit}},{field:"categoryId",headerName:"Category",width:150,valueGetter:function(e){var t;return null===(t=e.getValue(e.id,"category"))||void 0===t?void 0:t.category}}],hideFooterPagination:!0,autoHeight:!0,checkboxSelection:!0,selectionModel:v,onSelectionModelChange:function(e){x(e.selectionModel);var t=h.filter((function(t){return e.selectionModel.find((function(e){return e==t.id}))}));n(t)}}):Object(y.jsx)(d.a,{})})},I=function(e){var t=e.selectedIds,n=e.open,i=e.setOpen,o=e.onSelectionConfirmed,l=C(),d=Object(s.useContext)(b.c),u=Object(s.useState)([]),f=Object(a.a)(u,2),p=f[0],O=f[1],w=function(){return i(!1)},I=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=p.length){e.next=4;break}return e.next=3,d.msgbox.show("No item selected","Select Stocks");case 3:return e.abrupt("return");case 4:o(p),i(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(h.a,{open:n,onClose:w,fullScreen:!0,TransitionComponent:N,children:[Object(y.jsx)(v.a,{className:l.appBar,children:Object(y.jsxs)(x.a,{children:[Object(y.jsx)(m.a,{edge:"start",color:"inherit",onClick:w,"aria-label":"close",children:Object(y.jsx)(k.a,{})}),Object(y.jsx)(g.a,{variant:"h6",className:l.title,children:"Select Stocks"}),Object(y.jsx)(j.a,{onClick:w,color:"inherit",children:"Cancel"}),Object(y.jsx)(j.a,{onClick:I,color:"inherit",children:"Apply"})]})}),Object(y.jsx)(S,{selectedIds:t,onChange:function(e){return O(e)}})]})})}},351:function(e,t,n){"use strict";n.r(t);var i=n(10),r=n(19),c=n(0),a=n(46),o=n(14),s=n.n(o),l=n(25),d=n(57),u=n(266),j=n(235),h=n(28),b=n(257),f=n(62),p=n(255),O=n(261),v=n.n(O),x=n(229),m=n(244),g=n(258),w=n.n(g),k=n(264),y=n.n(k),C=n(284),N=n.n(C),S=n(282),I=n.n(S),P=n(283),D=n.n(P),F=n(35),G=n(256),A=n(2),V=function(){var e=Object(l.a)(s.a.mark((function e(t,n,i,r,c){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.confirmbox.show("Are you sure you want to delete this record?");case 2:if(!e.sent){e.next=8;break}return e.next=6,i.post("".concat("http://localhost:44084/api","/inventory/pricelist/delete?id=").concat(t));case 6:e.sent.success&&(r.snackbar.show("Record was successfully deleted"),c());case 8:case"end":return e.stop()}}),e)})));return function(t,n,i,r,c){return e.apply(this,arguments)}}(),M=Object(A.jsx)(x.a,{size:"small",disabled:!0,children:Object(A.jsx)(w.a,{style:{visibility:"hidden"}})}),L=function(e){var t=e.refresh,n=e.warehouseId,i=Object(c.useContext)(a.a),o=Object(d.a)(),O=Object(d.c)(),g=Object(c.useContext)(F.c),k=Object(c.useState)(null),C=Object(r.a)(k,2),S=C[0],P=C[1],L=function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.get("".concat("http://localhost:44084/api","/inventory/pricelist/list?warehouseId=").concat(n));case 2:(t=e.sent).success&&P(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(e,t){var n,r;(null===(n=i.Get("pricelists-setOpenProps"))||void 0===n?void 0:n.dispatch.bind(n))({data:e}),(null===(r=i.Get("pricelists-setPageMode"))||void 0===r?void 0:r.dispatch.bind(r))(t)};Object(c.useEffect)((function(){L()}),[t]);var E=[{field:"id",headerName:"Id",width:90},{field:"docDate",headerName:"Date",width:110,valueFormatter:function(e){return Object(h.b)(new Date(e.value))}},{field:"description",headerName:"Description",width:300},{field:"confirmed",headerName:"Status",width:150,headerAlign:"center",align:"center",renderCell:function(e){var t="Unconfirmed",n=e.getValue(e.id,"isConfirmed");if(n){var i=e.getValue(e.id,"confirmedBy");t="Confirmed by ".concat(i.name)}return Object(A.jsx)(A.Fragment,{children:n?Object(A.jsx)(u.a,{color:"green",children:Object(A.jsx)(m.a,{title:t,children:Object(A.jsx)(G.a,{badgeContent:e.getValue(e.id,"itemCount"),children:Object(A.jsx)(I.a,{})})})}):Object(A.jsx)(u.a,{color:"lightgray",children:Object(A.jsx)(m.a,{title:"Draft",children:Object(A.jsx)(D.a,{})})})})}},{field:"",filterable:!1,sortable:!1,disableColumnMenu:!0,flex:.3,cellClassName:"row-commands",renderCell:function(e){var t=e.row.isConfirmed;return Object(A.jsx)(A.Fragment,{children:t?Object(A.jsxs)(A.Fragment,{children:[M,Object(A.jsx)(m.a,{title:"View",children:Object(A.jsx)(x.a,{onClick:function(){return W(e.row,"view")},size:"small",children:Object(A.jsx)(w.a,{})})}),M,M,M]}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(m.a,{title:"Update Items",children:Object(A.jsx)(x.a,{onClick:function(){return function(e,t){var n,r;(null===(n=i.Get("pricelists-setOpenProps"))||void 0===n?void 0:n.dispatch.bind(n))({refresh:new Date,parent:e}),(null===(r=i.Get("pricelists-setPageMode"))||void 0===r?void 0:r.dispatch.bind(r))(t)}(e.row,"view-items")},size:"small",children:Object(A.jsx)(G.d,{badgeContent:e.getValue(e.id,"itemCount"),children:Object(A.jsx)(N.a,{})})})}),Object(A.jsx)(m.a,{title:"View",children:Object(A.jsx)(x.a,{onClick:function(){return W(e.row,"view")},size:"small",children:Object(A.jsx)(w.a,{})})}),Object(A.jsx)(m.a,{title:"Edit",children:Object(A.jsx)(x.a,{onClick:function(){return W(e.row,"edit")},size:"small",children:Object(A.jsx)(v.a,{})})}),Object(A.jsx)(m.a,{title:"Delete",children:Object(A.jsx)(x.a,{onClick:function(){return V(e.id,o,O,g,L)},size:"small",children:Object(A.jsx)(y.a,{})})})]})})}}];return Object(A.jsx)(A.Fragment,{children:S?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("h4",{children:"PriceList List"}),Object(A.jsxs)("small",{children:["As of ",Object(h.d)(t)]}),Object(A.jsx)(b.a,{rows:S,columns:E,hideFooterPagination:!0,autoHeight:!0}),Object(A.jsx)(p.a,{children:Object(A.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){var e;(null===(e=i.Get("pricelists-setPageMode"))||void 0===e?void 0:e.dispatch.bind(e))("create")},children:"Create"})})]}):Object(A.jsx)(f.a,{})})},W=n(259),E=n(200),R=n(201),z=n(372),B=n(337),J=n(339),U=Object(E.a)((function(e){return Object(R.a)({root:{"& > *":{margin:e.spacing(1),width:"25ch"}}})})),H=function(e){var t=e.data,n=e.onSubmit,o=Object(c.useContext)(F.c),s=U(),l=Object(c.useRef)(null),d=Object(c.useState)(t.docDate),u=Object(r.a)(d,2),j=u[0],b=u[1],f=Object(c.useState)(t.description),p=Object(r.a)(f,2),O=p[0],v=p[1],x=Object(c.useState)(t.remarks),m=Object(r.a)(x,2),g=m[0],w=m[1],k=Object(c.useState)(null),y=Object(r.a)(k,2),C=y[0],N=y[1];Object(c.useContext)(a.a).Add({key:"create-priceList-form-setExecSubmit",dispatch:N});var S=function(e){var r;if(null===e||void 0===e||e.preventDefault(),null===(r=l.current)||void 0===r?void 0:r.reportValidity()){var c=[];if(c.length>0)o.snackbar.show(c,"error");else{var a=Object(i.a)(Object(i.a)({},t),{},{docDate:j,description:O,remarks:g});n(a)}}};return Object(c.useEffect)((function(){C&&S()}),[C]),Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)("form",{ref:l,className:s.root,autoComplete:"off",onSubmit:S,children:[Object(A.jsxs)(B.a,{children:[Object(A.jsx)(J.a,{children:"Record Id"}),Object(A.jsx)("b",{children:0==t.id?"[New Record]":t.id})]}),Object(A.jsx)(z.a,{label:"Date",type:"date",required:!0,value:Object(h.c)(j,"YYYY-MM-DD"),onChange:function(e){return b(new Date(e.target.value))}}),Object(A.jsx)(z.a,{label:"Description",required:!0,value:O,onChange:function(e){return v(e.target.value)}}),Object(A.jsx)(z.a,{label:"Remarks",multiline:!0,value:g,onChange:function(e){return w(e.target.value)}})]})})},q=function(e){var t=e.parent,n=Object(c.useContext)(a.a),i=Object(d.c)(),r=Object(c.useContext)(F.c),o=function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.processing.show(),e.next=3,i.post("".concat("http://localhost:44084/api","/inventory/pricelist/save"),t);case 3:(n=e.sent).success&&(r.snackbar.show("Record was successfully saved"),u(n.data)),r.processing.hide();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(e){var t,i;(null===(t=n.Get("pricelists-setOpenProps"))||void 0===t?void 0:t.dispatch.bind(t))({data:e}),(null===(i=n.Get("pricelists-setPageMode"))||void 0===i?void 0:i.dispatch.bind(i))("view")},h=new W.d;return h.warehouseId=t.id,Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("h4",{children:"Create PriceList"}),Object(A.jsx)(H,{onSubmit:o,data:h}),Object(A.jsxs)(p.a,{children:[Object(A.jsx)(j.a,{variant:"contained",color:"default",onClick:function(){var e;(null===(e=n.Get("pricelists-setPageMode"))||void 0===e?void 0:e.dispatch.bind(e))("list")},children:"Cancel"}),Object(A.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){var e;(null===(e=n.Get("create-priceList-form-setExecSubmit"))||void 0===e?void 0:e.dispatch.bind(e))(new Date)},children:"Save"})]})]})},Y=function(e){var t=e.data,n=Object(c.useContext)(a.a),i=Object(d.c)(),r=Object(c.useContext)(F.c);if(!t)return Object(A.jsx)("div",{children:"No data provided"});var o=function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.processing.show(),e.next=3,i.post("".concat("http://localhost:44084/api","/inventory/pricelist/save"),t);case 3:(n=e.sent).success&&(r.snackbar.show("Record was successfully saved"),u(n.data)),r.processing.hide();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(e){var t,i;(null===(t=n.Get("pricelists-setOpenProps"))||void 0===t?void 0:t.dispatch.bind(t))({data:e}),(null===(i=n.Get("pricelists-setPageMode"))||void 0===i?void 0:i.dispatch.bind(i))("view")};return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("h4",{children:"Update PriceList"}),Object(A.jsx)(H,{onSubmit:o,data:t}),Object(A.jsxs)(p.a,{children:[Object(A.jsx)(j.a,{variant:"contained",color:"default",onClick:function(){return u(t)},children:"Cancel"}),Object(A.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){var e;(null===(e=n.Get("create-priceList-form-setExecSubmit"))||void 0===e?void 0:e.dispatch.bind(e))(new Date)},children:"Save"})]})]})},Q=n(88),T=n(267),K=n(241),X=function(e){var t=e.refresh,n=e.parentId,i=(Object(c.useContext)(a.a),Object(d.a)(),Object(d.c)()),o=Object(c.useState)(null),u=Object(r.a)(o,2),j=u[0],p=u[1],O=function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.get("".concat("http://localhost:44084/api","/inventory/pricelist-items?parentId=").concat(n));case 2:(t=e.sent).success&&p(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){O()}),[t]);var v=[{field:"stockId",headerName:"Stock Id",width:150},{field:"stockName",headerName:"Stock Name",width:300,valueGetter:function(e){var t;return null===(t=e.getValue(e.id,"stock"))||void 0===t?void 0:t.stockName}},{field:"description",headerName:"Description",width:300,valueGetter:function(e){var t;return null===(t=e.getValue(e.id,"stock"))||void 0===t?void 0:t.description}},{field:"unit",headerName:"Unit",width:150,valueGetter:function(e){var t,n;return null===(t=e.getValue(e.id,"stock"))||void 0===t||null===(n=t.unit)||void 0===n?void 0:n.unit}},{field:"category",headerName:"Category",width:150,valueGetter:function(e){var t,n;return null===(t=e.getValue(e.id,"stock"))||void 0===t||null===(n=t.category)||void 0===n?void 0:n.category}},{field:"qty",headerName:"Qty",width:100,headerAlign:"center",align:"center",type:"number"},{field:"price",headerName:"Price (\u20b1)",width:150,headerAlign:"right",align:"right",type:"number",valueFormatter:function(e){return Object(h.e)(Number(e.value))}},{field:"pointValue",headerName:"Point Value",width:150,headerAlign:"right",align:"right",type:"number",valueFormatter:function(e){return Object(h.e)(Number(e.value))}}];return Object(A.jsx)(A.Fragment,{children:j?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("h4",{children:"PriceList Items"}),Object(A.jsxs)("small",{children:["As of ",Object(h.d)(t)]}),Object(A.jsx)("div",{style:{height:400,width:"100%"},children:Object(A.jsx)(b.a,{rows:j,columns:v,hideFooterPagination:!0,autoHeight:!0})})]}):Object(A.jsx)(f.a,{})})},Z=n(273),$=Object(E.a)((function(e){return Object(R.a)({root:{position:"relative",flexGrow:1},paper:{padding:e.spacing(2),color:e.palette.text.secondary,minHeight:400},confirmed:{width:300,position:"absolute",top:50,right:50,opaity:.1}})})),_=function(e){var t,n=e.data,i=Object(d.a)(),r=Object(d.c)(),o=Object(c.useContext)(F.c),b=$(),f=Object(c.useContext)(a.a);if(!n)return Object(A.jsx)("div",{children:"No data provided"});var O=function(){var e;(null===(e=f.Get("pricelists-setPageMode"))||void 0===e?void 0:e.dispatch.bind(e))("list")},v=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.confirmbox.show("Are you sure you want to confirm this document?");case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return o.processing.show(),e.next=8,r.post("".concat("http://localhost:44084/api","/inventory/pricelist/confirm?id=").concat(n.id,"&profileId=").concat(i.Profile.id));case 8:e.sent.success&&(o.snackbar.show("Document was successfully confirmed"),O()),o.processing.hide();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("h4",{children:"View Price List"}),Object(A.jsxs)("div",{className:b.root,children:[n.isConfirmed&&Object(A.jsx)("img",{src:Z.a,className:b.confirmed}),Object(A.jsxs)(Q.a,{className:b.paper,children:[Object(A.jsxs)(T.a,{container:!0,spacing:3,children:[Object(A.jsx)(T.a,{item:!0,sm:2,children:Object(A.jsx)(u.a,{textAlign:"right",fontWeight:"bold",children:"Id:"})}),Object(A.jsx)(T.a,{item:!0,sm:10,children:Object(A.jsx)(G.e,{children:n.id})})]}),Object(A.jsxs)(T.a,{container:!0,spacing:3,children:[Object(A.jsx)(T.a,{item:!0,sm:2,children:Object(A.jsx)(u.a,{textAlign:"right",fontWeight:"bold",children:"Date:"})}),Object(A.jsx)(T.a,{item:!0,sm:10,children:Object(A.jsx)(G.e,{children:Object(h.b)(n.docDate)})})]}),Object(A.jsxs)(T.a,{container:!0,spacing:3,children:[Object(A.jsx)(T.a,{item:!0,sm:2,children:Object(A.jsx)(u.a,{textAlign:"right",fontWeight:"bold",children:"Description:"})}),Object(A.jsx)(T.a,{item:!0,sm:10,children:Object(A.jsx)(G.e,{children:n.description})})]}),Object(A.jsxs)(T.a,{container:!0,spacing:3,children:[Object(A.jsx)(T.a,{item:!0,sm:2,children:Object(A.jsx)(u.a,{textAlign:"right",fontWeight:"bold",children:"Remarks:"})}),Object(A.jsx)(T.a,{item:!0,sm:10,children:Object(A.jsx)(G.e,{children:n.remarks})})]}),n.isConfirmed&&Object(A.jsxs)(T.a,{container:!0,spacing:3,children:[Object(A.jsx)(T.a,{item:!0,sm:2,children:Object(A.jsx)(u.a,{textAlign:"right",fontWeight:"bold",children:"Confirmed by:"})}),Object(A.jsxs)(T.a,{item:!0,sm:10,children:[Object(A.jsx)(G.e,{children:null===(t=n.confirmedBy)||void 0===t?void 0:t.name}),Object(A.jsx)("div",{children:Object(A.jsx)("small",{children:Object(h.d)(n.dateConfirmed)})})]})]}),Object(A.jsx)("br",{}),Object(A.jsx)(K.a,{}),n&&Object(A.jsx)(X,{refresh:new Date,parentId:n.id})]})]}),Object(A.jsxs)(p.a,{children:[Object(A.jsx)(j.a,{variant:"contained",color:"default",onClick:O,children:"Back to list"}),n.itemCount>0&&!n.isConfirmed&&Object(A.jsx)(j.a,{variant:"contained",color:"primary",onClick:v,children:"Confirm"}),!n.isConfirmed&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){var e,t;(null===(e=f.Get("pricelists-setOpenProps"))||void 0===e?void 0:e.dispatch.bind(e))({refresh:new Date,parent:n}),(null===(t=f.Get("pricelists-setPageMode"))||void 0===t?void 0:t.dispatch.bind(t))("view-items")},children:"Update Items"}),Object(A.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){var e,t;(null===(e=f.Get("pricelists-setOpenProps"))||void 0===e?void 0:e.dispatch.bind(e))({data:n}),(null===(t=f.Get("pricelists-setPageMode"))||void 0===t?void 0:t.dispatch.bind(t))("edit")},children:"Edit"}),Object(A.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){var e,t,i=new W.d;i.warehouseId=n.warehouseId,(null===(e=f.Get("pricelists-setOpenProps"))||void 0===e?void 0:e.dispatch.bind(e))({data:i}),(null===(t=f.Get("pricelists-setPageMode"))||void 0===t?void 0:t.dispatch.bind(t))("create")},children:"Create"}),Object(A.jsx)(j.a,{variant:"contained",color:"secondary",onClick:function(){return V(n.id,i,r,o,O)},children:"Delete"})]})]})]})},ee=n(260),te=n(268),ne=n(274),ie=n(271),re=n(292),ce=function(e){var t=e.refresh,n=e.parent,i=Object(c.useContext)(a.a),o=Object(d.c)(),O=Object(c.useContext)(F.c),v=Object(c.useState)(null),x=Object(r.a)(v,2),m=x[0],g=x[1],w=Object(c.useState)(null),k=Object(r.a)(w,2),y=k[0],C=k[1],N=function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.get("".concat("http://localhost:44084/api","/inventory/pricelist-items?parentId=").concat(null===n||void 0===n?void 0:n.id));case 2:(t=e.sent).success&&(g(t.data),C(JSON.parse(JSON.stringify(t.data))));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=[];return null===m||void 0===m||m.forEach((function(t){null==t.stock?e.push("Stock Id# ".concat(t.stockId," does not exist anymore. It was probably deleted. Please remove the item.")):t.price<=0&&e.push("Stock Id# ".concat(t.stockId," Price is invalid. Please specify a value greater than 0"))})),e},I=function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=S()).length>0)){e.next=4;break}return O.msgbox.show(t,"Save items"),e.abrupt("return");case 4:return e.next=6,o.post("".concat("http://localhost:44084/api","/inventory/pricelist-items/save?parentId=").concat(null===n||void 0===n?void 0:n.id),m);case 6:e.sent.success&&(O.snackbar.show("Items were successfully saved"),P());case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e,t;(null===(e=i.Get("pricelists-setOpenProps"))||void 0===e?void 0:e.dispatch.bind(e))({data:n}),(null===(t=i.Get("pricelists-setPageMode"))||void 0===t?void 0:t.dispatch.bind(t))("view")},D=Object(c.useState)(!1),G=Object(r.a)(D,2),V=G[0],M=G[1],L=Object(c.useState)([]),W=Object(r.a)(L,2),E=W[0],R=W[1];Object(c.useEffect)((function(){n&&N()}),[t]);var z=[{field:"stockId",headerName:"Stock Id",width:150},{field:"stockName",headerName:"Stock Name",width:300,valueGetter:function(e){var t;return null===(t=e.getValue(e.id,"stock"))||void 0===t?void 0:t.stockName}},{field:"description",headerName:"Description",width:300,valueGetter:function(e){var t;return null===(t=e.getValue(e.id,"stock"))||void 0===t?void 0:t.description}},{field:"unit",headerName:"Unit",width:150,valueGetter:function(e){var t,n;return null===(t=e.getValue(e.id,"stock"))||void 0===t||null===(n=t.unit)||void 0===n?void 0:n.unit}},{field:"category",headerName:"Category",width:150,valueGetter:function(e){var t,n;return null===(t=e.getValue(e.id,"stock"))||void 0===t||null===(n=t.category)||void 0===n?void 0:n.category}},{field:"price",headerName:"Price (\u20b1)",width:150,headerAlign:"right",align:"right",type:"number",renderCell:function(e){return Object(A.jsx)(ae,{data:m,setData:g,params:e,mode:"price"})}},{field:"pointValue",headerName:"Point Value",width:150,headerAlign:"right",align:"right",type:"number",renderCell:function(e){return Object(A.jsx)(ae,{data:m,setData:g,params:e,mode:"point-value"})}}];return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)(u.a,{textAlign:"center",children:[Object(A.jsx)("b",{children:null===n||void 0===n?void 0:n.description}),Object(A.jsx)("br",{}),Object(A.jsx)("small",{children:"Date: ".concat(Object(h.b)(null===n||void 0===n?void 0:n.docDate))})]}),m?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("h4",{children:"Price List Items"}),Object(A.jsxs)("small",{children:["As of ",Object(h.d)(t)]}),Object(A.jsx)("div",{style:{height:400,width:"100%"},children:Object(A.jsx)(b.a,{rows:m,columns:z,hideFooterPagination:!0,autoHeight:!0,checkboxSelection:!0,disableSelectionOnClick:!0,selectionModel:E,onSelectionModelChange:function(e){return R(e.selectionModel)}})}),Object(A.jsx)(re.a,{selectedIds:m.map((function(e){return e.stockId})),open:V,setOpen:M,onSelectionConfirmed:function(e){var t=0,i=null===m||void 0===m?void 0:m.map((function(e){return e.id})).sort().reverse();i&&i.length>0&&(t=i[0]);var r=e.map((function(e,i){return{id:t+i+1,parentId:null===n||void 0===n?void 0:n.id,stockId:e.id,stock:e,qty:1,price:0,pointValue:0}})),c=[].concat(Object(ne.a)(null!==m&&void 0!==m?m:[]),Object(ne.a)(r));g(c)}}),Object(A.jsxs)(p.a,{children:[Object(A.jsx)(j.a,{variant:"contained",color:"default",onClick:Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(JSON.stringify(m)==JSON.stringify(y)){e.next=7;break}return e.next=3,O.confirmbox.show("Some changes were not yet saved. Would you like to save these changes?");case 3:if(!e.sent){e.next=7;break}return I(),e.abrupt("return");case 7:P();case 8:case"end":return e.stop()}}),e)}))),children:"Cancel"}),Object(A.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){return M(!0)},children:"Add Items"}),Object(A.jsx)(j.a,{variant:"contained",color:"primary",onClick:I,children:"Save"}),E.length>0&&Object(A.jsx)(j.a,{variant:"contained",color:"secondary",onClick:function(){var e,t=null!==(e=null===m||void 0===m?void 0:m.filter((function(e){return null==E.find((function(t){return t==e.id}))})))&&void 0!==e?e:null;g(t),R([])},children:"Remove Selected Items"})]})]}):Object(A.jsx)(f.a,{})]})},ae=function(e){var t,n,i,r=e.data,c=e.setData,a=e.params,o=e.mode;if(null==r)return Object(A.jsx)(A.Fragment,{children:"[No data]"});var s=null!==(t="price"==o?null===(n=r.find((function(e){return e.id==a.id})))||void 0===n?void 0:n.price:null===(i=r.find((function(e){return e.id==a.id})))||void 0===i?void 0:i.pointValue)&&void 0!==t?t:null;return Object(A.jsx)(ie.a,{value:s,zeroIsAllowed:!1,onFinalChange:function(e){var t=Object(ne.a)(r),n=t.find((function(e){return e.id==a.id}));n&&("price"==o&&(n.price=e),"point-value"==o&&(n.pointValue=e),c(Object(ne.a)(t)))},tfProps:{required:!0,variant:"outlined",inputProps:{style:{textAlign:"right"}}}})};t.default=function(){var e=Object(c.useState)("list"),t=Object(r.a)(e,2),n=t[0],o=t[1],s=Object(c.useState)({}),l=Object(r.a)(s,2),d=l[0],u=l[1],j=Object(c.useContext)(a.a);j.Add({key:"pricelists-setPageMode",dispatch:o}),j.Add({key:"pricelists-setOpenProps",dispatch:u});var h=sessionStorage.getItem("warehouse-selection"),b=Object(c.useState)(h?JSON.parse(h):null),f=Object(r.a)(b,2),p=f[0],O=f[1];return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(ee.default,{}),Object(A.jsx)(te.a,{value:null!==p&&void 0!==p?p:void 0,onChange:function(e){e?(O(e),sessionStorage.setItem("warehouse-selection",JSON.stringify(e))):(O(null),sessionStorage.removeItem("warehouse-selection")),o("list")}}),Object(A.jsx)("br",{}),p?Object(A.jsxs)(A.Fragment,{children:["list"==n&&Object(A.jsx)(L,{refresh:new Date,warehouseId:p.id}),"create"==n&&Object(A.jsx)(q,{parent:p}),"edit"==n&&Object(A.jsx)(Y,Object(i.a)({},d)),"view"==n&&Object(A.jsx)(_,Object(i.a)({},d)),"view-items"==n&&Object(A.jsx)(ce,Object(i.a)({},d))]}):Object(A.jsx)(A.Fragment,{children:"[Please select a warehouse to work on]"})]})}}}]);
//# sourceMappingURL=18.b2f74e67.chunk.js.map