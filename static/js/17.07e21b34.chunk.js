(this.webpackJsonpgpc=this.webpackJsonpgpc||[]).push([[17,36],{255:function(e,t,n){"use strict";var i=n(2);t.a=function(e){return Object(i.jsx)("div",{className:"page-commands",children:e.children})}},256:function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return l})),n.d(t,"f",(function(){return u})),n.d(t,"e",(function(){return j})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return b})),n.d(t,"g",(function(){return v}));var i=n(5),r=n(201),c=n(334),a=n(200),o=n(88),s=n(2),d=Object(i.a)((function(e){return Object(r.a)({badge:{right:-3,top:13,border:"2px solid ".concat(e.palette.background.paper),padding:"0 4px",backgroundColor:"gray",color:"white"}})}))(c.a),l=Object(i.a)((function(e){return Object(r.a)({badge:{right:-3,top:13,border:"2px solid ".concat(e.palette.background.paper),padding:"0 4px",backgroundColor:"green",color:"white"}})}))(c.a),u=function(e){var t=Object(a.a)((function(e){return Object(r.a)({root:{flexGrow:1},paper:{padding:e.spacing(2),color:e.palette.text.secondary,minHeight:400,position:"relative"}})}))();return Object(s.jsx)("div",{className:t.root,children:Object(s.jsx)(o.a,{className:t.paper,children:e.children})})},j=function(e){var t=e.height,n=e.maxWidth,i=e.children,c=Object(a.a)((function(e){return Object(r.a)({root:{fontSize:16,padding:"0 2px",borderBottom:"2px dotted #e0e0e0",height:null!==t&&void 0!==t?t:"initial",maxWidth:null!==n&&void 0!==n?n:300,minHeight:20}})}))();return Object(s.jsx)("div",{className:c.root,children:i})},h=function(e){var t=e.align,n=e.wrap,i=e.className,c=e.children,o=Object(a.a)((function(e){return Object(r.a)({root:{textAlign:t,whiteSpace:n?"initial":"nowrap","& > ul":{margin:0,paddingInlineStart:0},"& ul ul":{padding:"20px"},"& li":{listStyle:"none",display:"inline-block",verticalAlign:"top",margin:"left"==t?"0 10px 0 0":"center"==t?"0 5px 0 5px":"0 0 0 10px"}}})}))();return Object(s.jsx)("div",{className:"".concat(o.root," ").concat(null!==i&&void 0!==i?i:""),children:Object(s.jsx)("ul",{children:c})})},b=function(e){var t=e.align,n=e.width,i=e.children,c=Object(a.a)((function(e){return Object(r.a)({root:{textAlign:null!==t&&void 0!==t?t:"left",width:n?"".concat(n,"px"):"initial"}})}))();return Object(s.jsx)("li",{className:c.root,children:i})},v=Object(a.a)((function(e){return Object(r.a)({root:{"&, & *":{cursor:"pointer !important",color:"black !important"},"&:hover *":{color:"blue !important"}}})}))},259:function(e,t,n){"use strict";n.d(t,"f",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"g",(function(){return s})),n.d(t,"e",(function(){return d})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return j})),n.d(t,"a",(function(){return h})),n.d(t,"h",(function(){return b}));var i=n(65),r=n(64),c=n(7),a=function e(){Object(c.a)(this,e),this.id=0,this.unit=""},o=function e(){Object(c.a)(this,e),this.id=0,this.category=""},s=function e(){Object(c.a)(this,e),this.id=0,this.warehouse="",this.accountNo="",this.account=void 0},d=function e(){Object(c.a)(this,e),this.id=0,this.stockName="",this.description="",this.unitId=0,this.categoryId=0,this.unit=void 0,this.category=void 0},l=function e(){Object(c.a)(this,e),this.id=0,this.docDate=new Date,this.description="",this.warehouseId=0,this.remarks="",this.isConfirmed=!1,this.dateConfirmed=void 0,this.conrirmedByProfileId=void 0,this.confirmedBy=void 0,this.warehouse=void 0,this.itemCount=0},u=function(e){Object(i.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(c.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).poNo="",e.drNo="",e.amount=0,e.supplier="",e}return n}(l),j=function(e){Object(i.a)(n,e);var t=Object(r.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return n}(l),h=function(e){Object(i.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(c.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).orNo="",e.accountNo="",e.account=void 0,e.amount=0,e}return n}(l),b=function(e){Object(i.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(c.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).orNo="",e.toWarehouseId=0,e.toWarehouse=void 0,e.amount=0,e}return n}(l)},260:function(e,t,n){"use strict";n.r(t);var i=n(235),r=(n(89),n(57)),c=n(2),a=function(){var e=Object(r.b)().go;return Object(c.jsxs)("div",{className:"landing-page-menu",children:[Object(c.jsx)(i.a,{onClick:function(){return e("delivery")},children:"Delivery"}),Object(c.jsx)(i.a,{onClick:function(){return e("pricelist")},children:"Price List"}),Object(c.jsx)(i.a,{onClick:function(){return e("account-order")},children:"Account Order"}),Object(c.jsx)(i.a,{onClick:function(){return e("warehouse-order")},children:"Warehouse Order"}),"\xa0|\xa0",Object(c.jsx)(i.a,{onClick:function(){return e("inventory-report")},children:"Inventory"}),"\xa0|\xa0",Object(c.jsx)(i.a,{onClick:function(){return e("units")},children:"Units"}),Object(c.jsx)(i.a,{onClick:function(){return e("categories")},children:"Categories"}),Object(c.jsx)(i.a,{onClick:function(){return e("warehouse")},children:"Warehouse"}),Object(c.jsx)(i.a,{onClick:function(){return e("stocks")},children:"Stocks"})]})};t.default=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h3",{children:"Inventory"}),Object(c.jsx)("p",{children:"Please select your task"}),Object(c.jsx)(a,{}),Object(c.jsx)("hr",{}),Object(c.jsx)("br",{})]})}},268:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n(10),r=n(14),c=n.n(r),a=n(25),o=n(19),s=n(358),d=n(372),l=n(0),u=n(57),j=n(62),h=n(2),b=function(e){var t=e.value,n=e.onChange,r=e.refresh,b=e.inputLabel,v=Object(u.c)(),O=Object(l.useState)(null),f=Object(o.a)(O,2),p=f[0],x=f[1],m=Object(l.useState)(null),g=Object(o.a)(m,2),w=g[0],y=g[1],k=Object(l.useState)(""),C=Object(o.a)(k,2),N=C[0],S=C[1],I=function(){var e=Object(a.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("".concat("http://localhost:44084/api","/inventory/warehouse/list"));case 2:(t=e.sent).success&&x(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.useEffect)((function(){var e;I(),y(null!==t&&void 0!==t?t:null),S(null!==(e=null===t||void 0===t?void 0:t.warehouse)&&void 0!==e?e:"")}),[r,t]),Object(h.jsx)(h.Fragment,{children:p?Object(h.jsx)(s.a,{value:w,onChange:function(e,t){y(t),n&&n(null!==t&&void 0!==t?t:void 0)},inputValue:N,onInputChange:function(e,t){return S(null!==t&&void 0!==t?t:"")},options:p,getOptionLabel:function(e){return e.warehouse},renderInput:function(e){return Object(h.jsx)(d.a,Object(i.a)(Object(i.a)({},e),{},{label:b,required:!0}))}}):Object(h.jsx)(j.a,{})})};b.defaultProps={inputLabel:"Select Warehouse"}},271:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(10),r=n(19),c=n(372),a=n(0),o=n(28),s=n(2),d=function(e){var t,n=Object(a.useState)(Object(o.e)(Number(null!==(t=e.value)&&void 0!==t?t:"0"))),d=Object(r.a)(n,2),l=d[0],u=d[1];return Object(s.jsx)(c.a,Object(i.a)(Object(i.a)({},e.tfProps),{},{value:l,onChange:function(t){if(!isNaN(Number(t.target.value))){var n=parseFloat(t.target.value);(e.zeroIsAllowed?n>=0:n>0)&&u(t.target.value)}},onBlur:function(t){var n=t.target.value.replace(",",""),i=parseFloat(n);u(Object(o.e)(i)),e.onFinalChange(i)}}))}},273:function(e,t,n){"use strict";t.a=n.p+"static/media/confirmed.9ef1307f.png"},292:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var i=n(14),r=n.n(i),c=n(25),a=n(19),o=n(10),s=n(0),d=n(57),l=n(62),u=n(257),j=n(235),h=n(230),b=n(35),v=n(193),O=n(200),f=n(201),p=n(238),x=n(239),m=n(229),g=n(56),w=n(277),y=n.n(w),k=n(2),C=Object(O.a)((function(e){return Object(f.a)({appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}})})),N=Object(s.forwardRef)((function(e,t){return Object(k.jsx)(v.a,Object(o.a)({direction:"up",ref:t},e))})),S=function(e){var t=e.selectedIds,n=e.onChange,i=Object(d.c)(),o=Object(s.useState)(null),j=Object(a.a)(o,2),h=j[0],b=j[1],v=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.get("".concat("http://localhost:44084/api","/inventory/stock/list"));case 2:(t=e.sent).success&&b(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){v()}),[]);var O=Object(s.useState)([]),f=Object(a.a)(O,2),p=f[0],x=f[1];return Object(k.jsx)(k.Fragment,{children:h?Object(k.jsx)(u.a,{rows:h.filter((function(e){return!t.find((function(t){return t==e.id}))})),columns:[{field:"id",headerName:"Id",width:90},{field:"stockName",headerName:"Stock Name",width:300},{field:"description",headerName:"Description",width:350},{field:"unitId",headerName:"Unit",width:150,valueGetter:function(e){var t;return null===(t=e.getValue(e.id,"unit"))||void 0===t?void 0:t.unit}},{field:"categoryId",headerName:"Category",width:150,valueGetter:function(e){var t;return null===(t=e.getValue(e.id,"category"))||void 0===t?void 0:t.category}}],hideFooterPagination:!0,autoHeight:!0,checkboxSelection:!0,selectionModel:p,onSelectionModelChange:function(e){x(e.selectionModel);var t=h.filter((function(t){return e.selectionModel.find((function(e){return e==t.id}))}));n(t)}}):Object(k.jsx)(l.a,{})})},I=function(e){var t=e.selectedIds,n=e.open,i=e.setOpen,o=e.onSelectionConfirmed,d=C(),l=Object(s.useContext)(b.c),u=Object(s.useState)([]),v=Object(a.a)(u,2),O=v[0],f=v[1],w=function(){return i(!1)},I=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=O.length){e.next=4;break}return e.next=3,l.msgbox.show("No item selected","Select Stocks");case 3:return e.abrupt("return");case 4:o(O),i(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(h.a,{open:n,onClose:w,fullScreen:!0,TransitionComponent:N,children:[Object(k.jsx)(p.a,{className:d.appBar,children:Object(k.jsxs)(x.a,{children:[Object(k.jsx)(m.a,{edge:"start",color:"inherit",onClick:w,"aria-label":"close",children:Object(k.jsx)(y.a,{})}),Object(k.jsx)(g.a,{variant:"h6",className:d.title,children:"Select Stocks"}),Object(k.jsx)(j.a,{onClick:w,color:"inherit",children:"Cancel"}),Object(k.jsx)(j.a,{onClick:I,color:"inherit",children:"Apply"})]})}),Object(k.jsx)(S,{selectedIds:t,onChange:function(e){return f(e)}})]})})}},350:function(e,t,n){"use strict";n.r(t);var i=n(10),r=n(19),c=n(0),a=n(46),o=n(14),s=n.n(o),d=n(25),l=n(57),u=n(266),j=n(235),h=n(28),b=n(257),v=n(62),O=n(255),f=n(261),p=n.n(f),x=n(229),m=n(244),g=n(258),w=n.n(g),y=n(264),k=n.n(y),C=n(284),N=n.n(C),S=n(282),I=n.n(S),D=n(283),P=n.n(D),A=n(35),F=n(256),G=n(2),M=function(){var e=Object(d.a)(s.a.mark((function e(t,n,i,r,c){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.confirmbox.show("Are you sure you want to delete this record?");case 2:if(!e.sent){e.next=8;break}return e.next=6,i.post("".concat("http://localhost:44084/api","/inventory/delivery/delete?id=").concat(t));case 6:e.sent.success&&(r.snackbar.show("Record was successfully deleted"),c());case 8:case"end":return e.stop()}}),e)})));return function(t,n,i,r,c){return e.apply(this,arguments)}}(),V=Object(G.jsx)(x.a,{size:"small",disabled:!0,children:Object(G.jsx)(w.a,{style:{visibility:"hidden"}})}),W=function(e){var t=e.refresh,n=e.warehouseId,i=Object(c.useContext)(a.a),o=Object(l.a)(),f=Object(l.c)(),g=Object(c.useContext)(A.c),y=Object(c.useState)(null),C=Object(r.a)(y,2),S=C[0],D=C[1],W=function(){var e=Object(d.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("".concat("http://localhost:44084/api","/inventory/delivery/list?warehouseId=").concat(n));case 2:(t=e.sent).success&&D(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(e,t){var n,r;(null===(n=i.Get("deliveries-setOpenProps"))||void 0===n?void 0:n.dispatch.bind(n))({data:e}),(null===(r=i.Get("deliveries-setPageMode"))||void 0===r?void 0:r.dispatch.bind(r))(t)};Object(c.useEffect)((function(){W()}),[t]);var R=[{field:"id",headerName:"Id",width:90},{field:"docDate",headerName:"Date",width:110,valueFormatter:function(e){return Object(h.b)(new Date(e.value))}},{field:"description",headerName:"Description",width:300},{field:"poNo",headerName:"PO No.",width:130},{field:"drNo",headerName:"DR No.",width:130},{field:"supplier",headerName:"Supplier",width:200},{field:"amount",headerName:"Amount (\u20b1)",width:150,headerAlign:"right",align:"right",valueFormatter:function(e){return Object(h.e)(Number(e.value))}},{field:"confirmed",headerName:"Status",width:150,headerAlign:"center",align:"center",renderCell:function(e){var t="Unconfirmed",n=e.getValue(e.id,"isConfirmed");if(n){var i=e.getValue(e.id,"confirmedBy");t="Confirmed by ".concat(i.name)}return Object(G.jsx)(G.Fragment,{children:n?Object(G.jsx)(u.a,{color:"green",children:Object(G.jsx)(m.a,{title:t,children:Object(G.jsx)(F.a,{badgeContent:e.getValue(e.id,"itemCount"),children:Object(G.jsx)(I.a,{})})})}):Object(G.jsx)(u.a,{color:"lightgray",children:Object(G.jsx)(m.a,{title:"Draft",children:Object(G.jsx)(P.a,{})})})})}},{field:"",filterable:!1,sortable:!1,disableColumnMenu:!0,flex:.3,cellClassName:"row-commands",renderCell:function(e){var t=e.row.isConfirmed;return Object(G.jsx)(G.Fragment,{children:t?Object(G.jsxs)(G.Fragment,{children:[V,Object(G.jsx)(m.a,{title:"View",children:Object(G.jsx)(x.a,{onClick:function(){return q(e.row,"view")},size:"small",children:Object(G.jsx)(w.a,{})})}),V,V,V]}):Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(m.a,{title:"Update Items",children:Object(G.jsx)(x.a,{onClick:function(){return function(e,t){var n,r;(null===(n=i.Get("deliveries-setOpenProps"))||void 0===n?void 0:n.dispatch.bind(n))({refresh:new Date,parent:e}),(null===(r=i.Get("deliveries-setPageMode"))||void 0===r?void 0:r.dispatch.bind(r))(t)}(e.row,"view-items")},size:"small",children:Object(G.jsx)(F.d,{badgeContent:e.getValue(e.id,"itemCount"),children:Object(G.jsx)(N.a,{})})})}),Object(G.jsx)(m.a,{title:"View",children:Object(G.jsx)(x.a,{onClick:function(){return q(e.row,"view")},size:"small",children:Object(G.jsx)(w.a,{})})}),Object(G.jsx)(m.a,{title:"Edit",children:Object(G.jsx)(x.a,{onClick:function(){return q(e.row,"edit")},size:"small",children:Object(G.jsx)(p.a,{})})}),Object(G.jsx)(m.a,{title:"Delete",children:Object(G.jsx)(x.a,{onClick:function(){return M(e.id,o,f,g,W)},size:"small",children:Object(G.jsx)(k.a,{})})})]})})}}];return Object(G.jsx)(G.Fragment,{children:S?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("h4",{children:"Delivery List"}),Object(G.jsxs)("small",{children:["As of ",Object(h.d)(t)]}),Object(G.jsx)(b.a,{rows:S,columns:R,hideFooterPagination:!0,autoHeight:!0}),Object(G.jsx)(O.a,{children:Object(G.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){var e;(null===(e=i.Get("deliveries-setPageMode"))||void 0===e?void 0:e.dispatch.bind(e))("create")},children:"Create"})})]}):Object(G.jsx)(v.a,{})})},q=n(259),R=n(200),E=n(201),z=n(372),B=n(337),J=n(339),U=n(271),H=Object(R.a)((function(e){return Object(E.a)({root:{"& > *":{margin:e.spacing(1),width:"25ch"}}})})),L=function(e){var t=e.data,n=e.onSubmit,o=Object(c.useContext)(A.c),s=H(),d=Object(c.useRef)(null),l=Object(c.useState)(t.docDate),u=Object(r.a)(l,2),j=u[0],b=u[1],v=Object(c.useState)(t.description),O=Object(r.a)(v,2),f=O[0],p=O[1],x=Object(c.useState)(t.poNo),m=Object(r.a)(x,2),g=m[0],w=m[1],y=Object(c.useState)(t.drNo),k=Object(r.a)(y,2),C=k[0],N=k[1],S=Object(c.useState)(t.supplier),I=Object(r.a)(S,2),D=I[0],P=I[1],F=Object(c.useState)(t.amount),M=Object(r.a)(F,2),V=M[0],W=M[1],q=Object(c.useState)(t.remarks),R=Object(r.a)(q,2),E=R[0],L=R[1],Y=Object(c.useState)(null),Q=Object(r.a)(Y,2),T=Q[0],K=Q[1];Object(c.useContext)(a.a).Add({key:"create-delivery-form-setExecSubmit",dispatch:K});var X=function(e){var r;if(null===e||void 0===e||e.preventDefault(),null===(r=d.current)||void 0===r?void 0:r.reportValidity()){var c=[];if(c.length>0)o.snackbar.show(c,"error");else{var a=Object(i.a)(Object(i.a)({},t),{},{docDate:j,description:f,poNo:g,drNo:C,supplier:D,amount:V,remarks:E});n(a)}}};return Object(c.useEffect)((function(){T&&X()}),[T]),Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)("form",{ref:d,className:s.root,autoComplete:"off",onSubmit:X,children:[Object(G.jsxs)(B.a,{children:[Object(G.jsx)(J.a,{children:"Record Id"}),Object(G.jsx)("b",{children:0==t.id?"[New Record]":t.id})]}),Object(G.jsx)(z.a,{label:"Date",type:"date",required:!0,value:Object(h.c)(j,"YYYY-MM-DD"),onChange:function(e){return b(new Date(e.target.value))}}),Object(G.jsx)(z.a,{label:"Description",required:!0,value:f,onChange:function(e){return p(e.target.value)}}),Object(G.jsx)(z.a,{label:"PO No.",value:g,onChange:function(e){return w(e.target.value)}}),Object(G.jsx)(z.a,{label:"DR No.",value:C,onChange:function(e){return N(e.target.value)}}),Object(G.jsx)(z.a,{label:"Supplier",required:!0,value:D,onChange:function(e){return P(e.target.value)}}),Object(G.jsx)(U.a,{value:V,onFinalChange:function(e){return W(e)},zeroIsAllowed:!0,tfProps:{label:"Amount",required:!0,inputProps:{style:{textAlign:"right"}}}}),Object(G.jsx)(z.a,{label:"Remarks",multiline:!0,value:E,onChange:function(e){return L(e.target.value)}})]})})},Y=function(e){var t=e.parent,n=Object(c.useContext)(a.a),i=Object(l.c)(),r=Object(c.useContext)(A.c),o=function(){var e=Object(d.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.processing.show(),e.next=3,i.post("".concat("http://localhost:44084/api","/inventory/delivery/save"),t);case 3:(n=e.sent).success&&(r.snackbar.show("Record was successfully saved"),u(n.data)),r.processing.hide();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(e){var t,i;(null===(t=n.Get("deliveries-setOpenProps"))||void 0===t?void 0:t.dispatch.bind(t))({data:e}),(null===(i=n.Get("deliveries-setPageMode"))||void 0===i?void 0:i.dispatch.bind(i))("view")},h=new q.c;return h.warehouseId=t.id,Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("h4",{children:"Create Delivery"}),Object(G.jsx)(L,{onSubmit:o,data:h}),Object(G.jsxs)(O.a,{children:[Object(G.jsx)(j.a,{variant:"contained",color:"default",onClick:function(){var e;(null===(e=n.Get("deliveries-setPageMode"))||void 0===e?void 0:e.dispatch.bind(e))("list")},children:"Cancel"}),Object(G.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){var e;(null===(e=n.Get("create-delivery-form-setExecSubmit"))||void 0===e?void 0:e.dispatch.bind(e))(new Date)},children:"Save"})]})]})},Q=function(e){var t=e.data,n=Object(c.useContext)(a.a),i=Object(l.c)(),r=Object(c.useContext)(A.c);if(!t)return Object(G.jsx)("div",{children:"No data provided"});var o=function(){var e=Object(d.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.processing.show(),e.next=3,i.post("".concat("http://localhost:44084/api","/inventory/delivery/save"),t);case 3:(n=e.sent).success&&(r.snackbar.show("Record was successfully saved"),u(n.data)),r.processing.hide();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(e){var t,i;(null===(t=n.Get("deliveries-setOpenProps"))||void 0===t?void 0:t.dispatch.bind(t))({data:e}),(null===(i=n.Get("deliveries-setPageMode"))||void 0===i?void 0:i.dispatch.bind(i))("view")};return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("h4",{children:"Update Delivery"}),Object(G.jsx)(L,{onSubmit:o,data:t}),Object(G.jsxs)(O.a,{children:[Object(G.jsx)(j.a,{variant:"contained",color:"default",onClick:function(){return u(t)},children:"Cancel"}),Object(G.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){var e;(null===(e=n.Get("create-delivery-form-setExecSubmit"))||void 0===e?void 0:e.dispatch.bind(e))(new Date)},children:"Save"})]})]})},T=n(267),K=n(241),X=function(e){var t=e.refresh,n=e.parentId,i=(Object(c.useContext)(a.a),Object(l.c)()),o=Object(c.useState)(null),u=Object(r.a)(o,2),j=u[0],O=u[1],f=function(){var e=Object(d.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.get("".concat("http://localhost:44084/api","/inventory/delivery-items?parentId=").concat(n));case 2:(t=e.sent).success&&O(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){f()}),[t]);var p=[{field:"stockId",headerName:"Stock Id",width:150},{field:"stockName",headerName:"Stock Name",width:300,valueGetter:function(e){var t;return null===(t=e.getValue(e.id,"stock"))||void 0===t?void 0:t.stockName}},{field:"description",headerName:"Description",width:300,valueGetter:function(e){var t;return null===(t=e.getValue(e.id,"stock"))||void 0===t?void 0:t.description}},{field:"unit",headerName:"Unit",width:150,valueGetter:function(e){var t,n;return null===(t=e.getValue(e.id,"stock"))||void 0===t||null===(n=t.unit)||void 0===n?void 0:n.unit}},{field:"category",headerName:"Category",width:150,valueGetter:function(e){var t,n;return null===(t=e.getValue(e.id,"stock"))||void 0===t||null===(n=t.category)||void 0===n?void 0:n.category}},{field:"qty",headerName:"Qty",width:100,headerAlign:"center",align:"center",type:"number"},{field:"price",headerName:"Price (\u20b1)",width:150,headerAlign:"right",align:"right",type:"number",valueFormatter:function(e){return Object(h.e)(Number(e.value))}}];return Object(G.jsx)(G.Fragment,{children:j?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("h4",{children:"Delivery Items"}),Object(G.jsxs)("small",{children:["As of ",Object(h.d)(t)]}),Object(G.jsx)("div",{style:{height:400,width:"100%"},children:Object(G.jsx)(b.a,{rows:j,columns:p,hideFooterPagination:!0,autoHeight:!0})})]}):Object(G.jsx)(v.a,{})})},Z=n(273),$=Object(R.a)((function(e){return Object(E.a)({confirmed:{width:300,position:"absolute",top:50,right:50,opaity:.1}})})),_=function(e){var t,n=e.data,i=Object(l.a)(),r=Object(l.c)(),o=Object(c.useContext)(A.c),b=$(),v=Object(c.useContext)(a.a);if(!n)return Object(G.jsx)("div",{children:"No data provided"});var f=function(){var e;(null===(e=v.Get("deliveries-setPageMode"))||void 0===e?void 0:e.dispatch.bind(e))("list")},p=function(){var e=Object(d.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.confirmbox.show("Are you sure you want to confirm this document?");case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return o.processing.show(),e.next=8,r.post("".concat("http://localhost:44084/api","/inventory/delivery/confirm?id=").concat(n.id,"&profileId=").concat(i.Profile.id));case 8:e.sent.success&&(o.snackbar.show("Document was successfully confirmed"),f()),o.processing.hide();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("h4",{children:"View Delivery"}),Object(G.jsxs)(F.f,{children:[n.isConfirmed&&Object(G.jsx)("img",{src:Z.a,className:b.confirmed}),Object(G.jsxs)(T.a,{container:!0,spacing:3,children:[Object(G.jsx)(T.a,{item:!0,sm:2,children:Object(G.jsx)(u.a,{textAlign:"right",fontWeight:"bold",children:"Id:"})}),Object(G.jsx)(T.a,{item:!0,sm:10,children:Object(G.jsx)(F.e,{children:n.id})})]}),Object(G.jsxs)(T.a,{container:!0,spacing:3,children:[Object(G.jsx)(T.a,{item:!0,sm:2,children:Object(G.jsx)(u.a,{textAlign:"right",fontWeight:"bold",children:"Date:"})}),Object(G.jsx)(T.a,{item:!0,sm:10,children:Object(G.jsx)(F.e,{children:Object(h.b)(n.docDate)})})]}),Object(G.jsxs)(T.a,{container:!0,spacing:3,children:[Object(G.jsx)(T.a,{item:!0,sm:2,children:Object(G.jsx)(u.a,{textAlign:"right",fontWeight:"bold",children:"Description:"})}),Object(G.jsx)(T.a,{item:!0,sm:10,children:Object(G.jsx)(F.e,{children:n.description})})]}),Object(G.jsxs)(T.a,{container:!0,spacing:3,children:[Object(G.jsx)(T.a,{item:!0,sm:2,children:Object(G.jsx)(u.a,{textAlign:"right",fontWeight:"bold",children:"PO No.:"})}),Object(G.jsx)(T.a,{item:!0,sm:10,children:Object(G.jsx)(F.e,{children:n.poNo})})]}),Object(G.jsxs)(T.a,{container:!0,spacing:3,children:[Object(G.jsx)(T.a,{item:!0,sm:2,children:Object(G.jsx)(u.a,{textAlign:"right",fontWeight:"bold",children:"DR No.:"})}),Object(G.jsx)(T.a,{item:!0,sm:10,children:Object(G.jsx)(F.e,{children:n.drNo})})]}),Object(G.jsxs)(T.a,{container:!0,spacing:3,children:[Object(G.jsx)(T.a,{item:!0,sm:2,children:Object(G.jsx)(u.a,{textAlign:"right",fontWeight:"bold",children:"Supplier:"})}),Object(G.jsx)(T.a,{item:!0,sm:10,children:Object(G.jsx)(F.e,{children:n.supplier})})]}),Object(G.jsxs)(T.a,{container:!0,spacing:3,children:[Object(G.jsx)(T.a,{item:!0,sm:2,children:Object(G.jsx)(u.a,{textAlign:"right",fontWeight:"bold",children:"Amount:"})}),Object(G.jsx)(T.a,{item:!0,sm:10,children:Object(G.jsx)(F.e,{children:Object(h.a)(n.amount)})})]}),Object(G.jsxs)(T.a,{container:!0,spacing:3,children:[Object(G.jsx)(T.a,{item:!0,sm:2,children:Object(G.jsx)(u.a,{textAlign:"right",fontWeight:"bold",children:"Remarks:"})}),Object(G.jsx)(T.a,{item:!0,sm:10,children:Object(G.jsx)(F.e,{children:n.remarks})})]}),n.isConfirmed&&Object(G.jsxs)(T.a,{container:!0,spacing:3,children:[Object(G.jsx)(T.a,{item:!0,sm:2,children:Object(G.jsx)(u.a,{textAlign:"right",fontWeight:"bold",children:"Confirmed by:"})}),Object(G.jsxs)(T.a,{item:!0,sm:10,children:[Object(G.jsx)(z.a,{value:null===(t=n.confirmedBy)||void 0===t?void 0:t.name,disabled:!0}),Object(G.jsx)("div",{children:Object(G.jsx)("small",{children:Object(h.d)(n.dateConfirmed)})})]})]}),Object(G.jsx)(K.a,{}),n&&Object(G.jsx)(X,{refresh:new Date,parentId:n.id})]}),Object(G.jsxs)(O.a,{children:[Object(G.jsx)(j.a,{variant:"contained",color:"default",onClick:f,children:"Back to list"}),n.itemCount>0&&!n.isConfirmed&&Object(G.jsx)(j.a,{variant:"contained",color:"primary",onClick:p,children:"Confirm"}),!n.isConfirmed&&Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){var e,t;(null===(e=v.Get("deliveries-setOpenProps"))||void 0===e?void 0:e.dispatch.bind(e))({refresh:new Date,parent:n}),(null===(t=v.Get("deliveries-setPageMode"))||void 0===t?void 0:t.dispatch.bind(t))("view-items")},children:"Update Items"}),Object(G.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){var e,t;(null===(e=v.Get("deliveries-setOpenProps"))||void 0===e?void 0:e.dispatch.bind(e))({data:n}),(null===(t=v.Get("deliveries-setPageMode"))||void 0===t?void 0:t.dispatch.bind(t))("edit")},children:"Edit"}),Object(G.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){var e,t,i=new q.c;i.warehouseId=n.warehouseId,(null===(e=v.Get("deliveries-setOpenProps"))||void 0===e?void 0:e.dispatch.bind(e))({data:i}),(null===(t=v.Get("deliveries-setPageMode"))||void 0===t?void 0:t.dispatch.bind(t))("create")},children:"Create"}),Object(G.jsx)(j.a,{variant:"contained",color:"secondary",onClick:function(){return M(n.id,i,r,o,f)},children:"Delete"})]})]})]})},ee=n(260),te=n(268),ne=n(274),ie=n(292),re=function(e){var t=e.refresh,n=e.parent,i=Object(c.useContext)(a.a),o=Object(l.c)(),f=Object(c.useContext)(A.c),p=Object(c.useState)(null),x=Object(r.a)(p,2),m=x[0],g=x[1],w=Object(c.useState)(null),y=Object(r.a)(w,2),k=y[0],C=y[1],N=function(){var e=Object(d.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.get("".concat("http://localhost:44084/api","/inventory/delivery-items?parentId=").concat(null===n||void 0===n?void 0:n.id));case 2:(t=e.sent).success&&(g(t.data),C(JSON.parse(JSON.stringify(t.data))));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=[];return null===m||void 0===m||m.forEach((function(t){null==t.stock?e.push("Stock Id# ".concat(t.stockId," does not exist anymore. It was probably deleted. Please remove the item.")):t.qty<=0&&e.push("Stock Id# ".concat(t.stockId," Qty is invalid. Please specify a value greater than 0"))})),e},I=function(){var e=Object(d.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=S()).length>0)){e.next=4;break}return f.msgbox.show(t,"Save items"),e.abrupt("return");case 4:return e.next=6,o.post("".concat("http://localhost:44084/api","/inventory/delivery-items/save?parentId=").concat(null===n||void 0===n?void 0:n.id),m);case 6:e.sent.success&&(f.snackbar.show("Items were successfully saved"),D());case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e,t;(null===(e=i.Get("deliveries-setOpenProps"))||void 0===e?void 0:e.dispatch.bind(e))({data:n}),(null===(t=i.Get("deliveries-setPageMode"))||void 0===t?void 0:t.dispatch.bind(t))("view")},P=Object(c.useState)(!1),F=Object(r.a)(P,2),M=F[0],V=F[1],W=Object(c.useState)([]),q=Object(r.a)(W,2),R=q[0],E=q[1];Object(c.useEffect)((function(){n&&N()}),[t]);var z=[{field:"stockId",headerName:"Stock Id",width:150},{field:"stockName",headerName:"Stock Name",width:300,valueGetter:function(e){var t;return null===(t=e.getValue(e.id,"stock"))||void 0===t?void 0:t.stockName}},{field:"description",headerName:"Description",width:300,valueGetter:function(e){var t;return null===(t=e.getValue(e.id,"stock"))||void 0===t?void 0:t.description}},{field:"unit",headerName:"Unit",width:150,valueGetter:function(e){var t,n;return null===(t=e.getValue(e.id,"stock"))||void 0===t||null===(n=t.unit)||void 0===n?void 0:n.unit}},{field:"category",headerName:"Category",width:150,valueGetter:function(e){var t,n;return null===(t=e.getValue(e.id,"stock"))||void 0===t||null===(n=t.category)||void 0===n?void 0:n.category}},{field:"qty",headerName:"Qty",width:100,headerAlign:"center",align:"center",type:"number",renderCell:function(e){return Object(G.jsx)(ce,{data:m,setData:g,params:e,fieldName:"qty"})}},{field:"price",headerName:"Price (\u20b1)",width:150,headerAlign:"right",align:"right",type:"number",renderCell:function(e){return Object(G.jsx)(ce,{data:m,setData:g,params:e,fieldName:"price"})}}];return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsxs)(u.a,{textAlign:"center",children:[Object(G.jsx)("b",{children:null===n||void 0===n?void 0:n.description}),Object(G.jsx)("br",{}),Object(G.jsx)("small",{children:"Date: ".concat(Object(h.b)(null===n||void 0===n?void 0:n.docDate)," | DR # ").concat(null===n||void 0===n?void 0:n.drNo," | PO # ").concat(null===n||void 0===n?void 0:n.poNo)})]}),m?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("h4",{children:"Delivery Items"}),Object(G.jsxs)("small",{children:["As of ",Object(h.d)(t)]}),Object(G.jsx)("div",{style:{height:400,width:"100%"},children:Object(G.jsx)(b.a,{rows:m,columns:z,hideFooterPagination:!0,autoHeight:!0,checkboxSelection:!0,disableSelectionOnClick:!0,selectionModel:R,onSelectionModelChange:function(e){return E(e.selectionModel)}})}),Object(G.jsx)(ie.a,{selectedIds:m.map((function(e){return e.stockId})),open:M,setOpen:V,onSelectionConfirmed:function(e){var t=0,i=null===m||void 0===m?void 0:m.map((function(e){return e.id})).sort().reverse();i&&i.length>0&&(t=i[0]);var r=e.map((function(e,i){return{id:t+i+1,parentId:null===n||void 0===n?void 0:n.id,stockId:e.id,stock:e,qty:1,price:0}})),c=[].concat(Object(ne.a)(null!==m&&void 0!==m?m:[]),Object(ne.a)(r));g(c)}}),Object(G.jsxs)(O.a,{children:[Object(G.jsx)(j.a,{variant:"contained",color:"default",onClick:Object(d.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(JSON.stringify(m)==JSON.stringify(k)){e.next=7;break}return e.next=3,f.confirmbox.show("Some changes were not yet saved. Would you like to save these changes?");case 3:if(!e.sent){e.next=7;break}return I(),e.abrupt("return");case 7:D();case 8:case"end":return e.stop()}}),e)}))),children:"Cancel"}),Object(G.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){return V(!0)},children:"Add Items"}),Object(G.jsx)(j.a,{variant:"contained",color:"primary",onClick:I,children:"Save"}),R.length>0&&Object(G.jsx)(j.a,{variant:"contained",color:"secondary",onClick:function(){var e,t=null!==(e=null===m||void 0===m?void 0:m.filter((function(e){return null==R.find((function(t){return t==e.id}))})))&&void 0!==e?e:null;g(t),E([])},children:"Remove Selected Items"})]})]}):Object(G.jsx)(v.a,{})]})},ce=function(e){var t,n,i,r=e.data,c=e.setData,a=e.params,o=e.fieldName;return null==r?Object(G.jsx)(G.Fragment,{children:"[No data]"}):"qty"===o?Object(G.jsx)(z.a,{value:null===(t=r.find((function(e){return e.id==a.id})))||void 0===t?void 0:t.qty,required:!0,type:"number",variant:"outlined",inputProps:{style:{textAlign:"center"}},onChange:function(e){var t=Object(ne.a)(r),n=t.find((function(e){return e.id==a.id}));if(n){if(!isNaN(Number(e.target.value))){var i=parseInt(e.target.value);i>0&&(n.qty=i)}c&&c(Object(ne.a)(t))}}}):Object(G.jsx)(U.a,{value:null!==(n=null===(i=r.find((function(e){return e.id==a.id})))||void 0===i?void 0:i.price)&&void 0!==n?n:null,zeroIsAllowed:!0,onFinalChange:function(e){var t=Object(ne.a)(r),n=t.find((function(e){return e.id==a.id}));n&&(n.price=e,c(Object(ne.a)(t)))},tfProps:{required:!0,variant:"outlined",inputProps:{style:{textAlign:"right"}}}})};t.default=function(){var e=Object(c.useState)("list"),t=Object(r.a)(e,2),n=t[0],o=t[1],s=Object(c.useState)({}),d=Object(r.a)(s,2),l=d[0],u=d[1],j=Object(c.useContext)(a.a);j.Add({key:"deliveries-setPageMode",dispatch:o}),j.Add({key:"deliveries-setOpenProps",dispatch:u});var h=sessionStorage.getItem("warehouse-selection"),b=Object(c.useState)(h?JSON.parse(h):null),v=Object(r.a)(b,2),O=v[0],f=v[1];return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(ee.default,{}),Object(G.jsx)(te.a,{value:null!==O&&void 0!==O?O:void 0,onChange:function(e){e?(f(e),sessionStorage.setItem("warehouse-selection",JSON.stringify(e))):(f(null),sessionStorage.removeItem("warehouse-selection")),o("list")}}),Object(G.jsx)("br",{}),O?Object(G.jsxs)(G.Fragment,{children:["list"==n&&Object(G.jsx)(W,{refresh:new Date,warehouseId:O.id}),"create"==n&&Object(G.jsx)(Y,{parent:O}),"edit"==n&&Object(G.jsx)(Q,Object(i.a)({},l)),"view"==n&&Object(G.jsx)(_,Object(i.a)({},l)),"view-items"==n&&Object(G.jsx)(re,Object(i.a)({},l))]}):Object(G.jsx)(G.Fragment,{children:"[Please select a warehouse to work on]"})]})}}}]);
//# sourceMappingURL=17.07e21b34.chunk.js.map